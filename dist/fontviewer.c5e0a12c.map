{"version":3,"sources":["index.js"],"names":["glyphs","document","querySelector","color","fontFamily","webFonts","Hack","FontAwesome","fonts","querySelectorAll","forEach","el","addEventListener","selectFont","event","classList","remove","target","add","fontName","textContent","Object","keys","includes","showArrayBuffer","showWebFont","url","fetch","then","res","blob","fileReader","FileReader","onload","ab","result","readAsArrayBuffer","displayFont","newFont","font","opentype","parse","err","supported","showFont","fontList","length","file","files","arrayReader","localStorage","setItem","abToStr","style","visibility","innerHTML","charCodes","values","filter","glyph","unicode","undefined","map","g","names","fontFace","window","FontFace","inner","charCode","String","fromCharCode","join","showDetails","li","createElement","appendChild","dataset","details","unicodeBox","decimalBox","htmlCodeBox","charBox","setTimeout","top","offsetTop","left","offsetLeft","parseInt","toString","slice","buf","apply","Uint16Array","strToAb","str","ArrayBuffer","bufView","i","strLen","charCodeAt","key","value","getItem"],"mappings":"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","file":"fontviewer.c5e0a12c.map","sourceRoot":"..","sourcesContent":["const glyphs = document.querySelector('.glyphs');\nlet color = '#3e3e3e';\nlet fontFamily;\nconst webFonts = {\n  Hack: 'https://cdnjs.cloudflare.com/ajax/libs/hack-font/3.003/web/fonts/hack-bold-subset.woff',\n  FontAwesome: 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff'\n};\nconst fonts = {};\n\ndocument.querySelectorAll('.fonts .font').forEach(el => el.addEventListener('click', selectFont))\n\nfunction selectFont(event) {\n  document.querySelectorAll('.fonts .font').forEach(el => el.classList.remove('selected'))\n  event.target.classList.add('selected');\n  const fontName = event.target.textContent;\n  if (Object.keys(fonts).includes(fontName)) {\n    showArrayBuffer(fonts[fontName], true);\n    return;\n  }\n\n  showWebFont(webFonts[fontName])\n}\n\nfunction showWebFont(url) {\n  fetch(url)\n  .then(res => res.blob())\n  .then(blob => {\n    const fileReader = new FileReader();\n    fileReader.onload = function(event) {\n      const ab = event.target.result;\n      showArrayBuffer(ab, true, false);\n    };\n    fileReader.readAsArrayBuffer(blob);\n  });\n}\n\nfunction showArrayBuffer(ab, displayFont, newFont = false) {\n  let font;\n  try {\n    font = opentype.parse(ab);\n  } catch (err) {\n    font = { supported: false };\n  }\n  showFont(font, ab, displayFont);\n\n  if (newFont) {\n    const fontList = document.querySelectorAll('.fonts .font');\n    fontList[fontList.length-1].addEventListener('click', selectFont)\n    fontList.forEach(el => el.classList.remove('selected'))\n    fontList[fontList.length-1].classList.add('selected')\n  }\n}\n\ndocument.querySelector('.file-reader').addEventListener('change', function(event) {\n  const file = event.target.files[0];\n  if (file) {\n    const arrayReader = new FileReader();\n    arrayReader.readAsArrayBuffer(file);\n    arrayReader.onload = function(event) {\n      showArrayBuffer(event.target.result, true, true);\n\n      localStorage.setItem(fontFamily, abToStr(event.target.result));\n    }\n  }\n});\n\nfunction showFont(font, ab, displayFont) {\n  document.querySelector('.details').style.visibility = 'hidden';\n  if (!font || !font.supported) {\n    fontFamily = '\"Helvetica Neue\", Helvetica, Arial';\n    glyphs.style.color = 'tomato';\n    glyphs.style.fontFamily = fontFamily;\n    glyphs.innerHTML = 'Invalid font file or unsupported format';\n    return;\n  }\n  const charCodes = Object.values(font.glyphs.glyphs).filter(glyph => glyph.unicode !== undefined).map(g => g.unicode)\n  fontFamily = Object.values(font.names.fontFamily)[0];\n\n  const fontFace = new window.FontFace(fontFamily, ab);\n  document.fonts.add(fontFace);\n\n  if (displayFont) {\n    const inner = charCodes.map(charCode => `<span class=\"glyph\" data-unicode=\"${charCode}\">${String.fromCharCode(charCode)}</span>`).join('\\t');\n    glyphs.innerHTML = inner;\n\n    document.querySelectorAll('.glyph').forEach(g => {\n      g.addEventListener('mousemove', showDetails);\n      g.addEventListener('touchmove', showDetails);\n    });\n\n    glyphs.style.color = color;\n    glyphs.style.fontFamily = fontFamily;\n  }\n\n  if (!Object.keys(fonts).includes(fontFamily) && !Object.keys(webFonts).includes(fontFamily)) {\n    const li = document.createElement('li');\n    li.classList.add('font');\n    li.innerHTML = fontFamily;\n    fonts[fontFamily] = ab;\n    document.querySelector('.fonts').appendChild(li);\n  }\n  return fontFamily;\n}\n\nfunction showDetails(event) {\n  const unicode = event.target.dataset.unicode;\n  const details = document.querySelector('.details');\n  const unicodeBox = details.querySelector('.unicode');\n  const decimalBox = details.querySelector('.decimal');\n  const htmlCodeBox = details.querySelector('.html');\n  const charBox = details.querySelector('.char');\n\n  details.style.visibility = 'hidden';\n  details.classList.remove('trans');\n  setTimeout(() => {\n    details.style.visibility = 'visible';\n    details.style.top = `${event.target.offsetTop-50}px`;\n    details.style.left = `${event.target.offsetLeft-15}px`;\n    unicodeBox.innerHTML = '0x' + ('0000' + parseInt(unicode).toString(16)).slice(-4);\n    decimalBox.innerHTML = unicode;\n    htmlCodeBox.innerHTML = `&amp;#${unicode};`;\n    charBox.style.fontFamily = fontFamily;\n    charBox.innerHTML = String.fromCharCode(unicode);\n\n    details.classList.add('trans');\n\n    details.addEventListener('mouseleave', () => details.style.visibility = 'hidden');\n  }, 1);\n}\n\nfunction abToStr(buf) {\n  return String.fromCharCode.apply(null, new Uint16Array(buf));\n}\n\nfunction strToAb(str) {\n  var buf = new ArrayBuffer(str.length*2); // 2 bytes for each char\n  var bufView = new Uint16Array(buf);\n  for (var i=0, strLen=str.length; i < strLen; i++) {\n    bufView[i] = str.charCodeAt(i);\n  }\n  return buf;\n}\n\nfor (var i = 0; i < localStorage.length; i++) {\n  const key = localStorage.key(i);\n  const value = localStorage.getItem(key);\n  showArrayBuffer(strToAb(value), false, true);\n}\ndocument.querySelectorAll('.fonts .font').forEach(el => el.classList.remove('selected'))\n\ndocument.querySelector('.url-input input').addEventListener('keypress', event => {\n  if (event.charCode === 13) {\n    showWebFont(event.target.value);\n    event.target.value = '';\n  }\n});\n"]}