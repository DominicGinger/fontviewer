{"version":3,"sources":["index.js"],"names":["glyphs","document","querySelector","color","fontFamily","fonts","querySelectorAll","forEach","el","addEventListener","selectFont","event","classList","remove","target","add","fontName","textContent","includes","style","opentype","load","err","font","console","log","createElement","type","appendChild","createTextNode","head","showFont","push","file","files","arrayReader","FileReader","readAsArrayBuffer","onload","parse","result","supported","fontList","length","visibility","innerHTML","charCodes","Object","values","filter","glyph","unicode","undefined","map","g","names","inner","charCode","String","fromCharCode","join","fontFace","window","FontFace","showDetails","li","dataset","details","unicodeBox","decimalBox","htmlCodeBox","charBox","setTimeout","top","offsetTop","left","offsetLeft","parseInt","toString","slice"],"mappings":"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","file":"fontviewer.c5e0a12c.map","sourceRoot":"..","sourcesContent":["const glyphs = document.querySelector('.glyphs');\nlet color = 'DimGrey';\nlet fontFamily;\nconst fonts = [];\n\ndocument.querySelectorAll('.fonts .font').forEach(el => el.addEventListener('click', selectFont))\n\nfunction selectFont(event) {\n  document.querySelectorAll('.fonts .font').forEach(el => el.classList.remove('selected'))\n  event.target.classList.add('selected');\n  const fontName = event.target.textContent;\n  if (fonts.includes(fontName)) {\n    glyphs.style.fontFamily = fontName;\n    return;\n  }\n  opentype.load(`/fonts/${fontName}-Regular.ttf`, (err, font) => {\n    if (err) {\n      console.log(err);\n    }\n    const style = document.createElement('style');\n    style.type = 'text/css';\n    style.appendChild(document.createTextNode(`\n        @font-face {\n          font-family: ${fontName};\n          src: url(/fonts/${fontName}-Regular.ttf);\n        }\n      `));\n    document.head.appendChild(style);\n    showFont(font);\n    fonts.push(fontName);\n  });\n}\n\ndocument.querySelector('.file-reader').addEventListener('change', function(event) {\n  const file = event.target.files[0];\n  if (file) {\n    const arrayReader = new FileReader();\n    arrayReader.readAsArrayBuffer(file);\n    arrayReader.onload = function(event) {\n      let font;\n      try {\n        font = opentype.parse(event.target.result);\n      } catch (err) {\n        font = { supported: false };\n      }\n      showFont(font);\n      const fontList = document.querySelectorAll('.fonts .font');\n      fontList[fontList.length-1].addEventListener('click', selectFont)\n      fontList.forEach(el => el.classList.remove('selected'))\n      fontList[fontList.length-1].classList.add('selected')\n    }\n  }\n});\n\nfunction showFont(font) {\n  document.querySelector('.details').style.visibility = 'hidden';\n  if (!font.supported) {\n    fontFamily = '\"Helvetica Neue\", Helvetica, Arial';\n    glyphs.style.color = 'tomato';\n    glyphs.style.fontFamily = fontFamily;\n    glyphs.innerHTML = 'Invalid font file or unsupported format';\n    return;\n  }\n  const charCodes = Object.values(font.glyphs.glyphs).filter(glyph => glyph.unicode !== undefined).map(g => g.unicode)\n  fontFamily = Object.values(font.names.fontFamily)[0];\n\n  const inner = charCodes.map(charCode => `<span class=\"glyph\" data-unicode=\"${charCode}\">${String.fromCharCode(charCode)}</span>`).join('\\t');\n  glyphs.innerHTML = inner;\n\n  const fontFace = new window.FontFace(fontFamily, event.target.result);\n  document.fonts.add(fontFace);\n\n  document.querySelectorAll('.glyph').forEach(g => {\n    g.addEventListener('mousemove', showDetails);\n    g.addEventListener('touchmove', showDetails);\n  });\n\n  glyphs.style.color = color;\n  glyphs.style.fontFamily = fontFamily;\n\n  const li = document.createElement('li');\n  li.classList.add('font');\n  li.innerHTML = fontFamily;\n  fonts.push(fontFamily);\n  document.querySelector('.fonts').appendChild(li);\n}\n\nfunction showDetails(event) {\n  const unicode = event.target.dataset.unicode;\n  const details = document.querySelector('.details');\n  const unicodeBox = details.querySelector('.unicode');\n  const decimalBox = details.querySelector('.decimal');\n  const htmlCodeBox = details.querySelector('.html');\n  const charBox = details.querySelector('.char');\n\n  details.style.visibility = 'hidden';\n  details.classList.remove('trans');\n  setTimeout(() => {\n    details.style.visibility = 'visible';\n    details.style.top = `${event.target.offsetTop-50}px`;\n    details.style.left = `${event.target.offsetLeft-15}px`;\n    unicodeBox.innerHTML = '0x' + ('0000' + parseInt(unicode).toString(16)).slice(-4);\n    decimalBox.innerHTML = unicode;\n    htmlCodeBox.innerHTML = `&amp;#${unicode};`;\n    charBox.style.fontFamily = fontFamily;\n    charBox.innerHTML = String.fromCharCode(unicode);\n\n    details.classList.add('trans');\n\n    details.addEventListener('mouseleave', () => details.style.visibility = 'hidden');\n  }, 1);\n}\n"]}