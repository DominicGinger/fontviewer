{"version":3,"sources":["index.js"],"names":["drawGlyphs","n","currentPage","base","window","scrollTo","setTimeout","document","querySelector","innerHTML","chars","span","createElement","i","value","String","fromCharCode","newSpan","classList","add","appendChild","q","canvas","style","width","height","offsetWidth","links","querySelectorAll","glyphs","removeSelected","forEach","call","link","remove","addSelected","idx","addEventListener","event","target","fontFamily","fontSize","color","file","files","font","arrayReader","FileReader","onload","opentype","parse","result","t0","performance","now","str","glyphsUnfiltered","stringToGlyphs","filter","glyph","unicode","undefined","t1","console","log","spacing","x","y","length","ctx","getContext","index","draw","readAsArrayBuffer"],"mappings":"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","file":"fontviewer.c5e0a12c.map","sourceRoot":"..","sourcesContent":["function drawGlyphs(n) {\n  currentPage = n;\n  const base = n*16*16*16;\n  window.scrollTo(0, 0);\n  setTimeout(() => document.querySelector('.glyphs').innerHTML = '', 1);\n  let chars = '';\n  let span = document.createElement('span');\n  for (let i = base; i < base+16*16*16; i++) {\n    const value = String.fromCharCode(i);\n    const newSpan = document.createElement('span');\n    newSpan.innerHTML = `${value}\\t`;\n    newSpan.classList.add('glyph');\n    span.appendChild(newSpan);\n\n    if (i%16 === 0) {\n      (q => setTimeout(() => {\n        if (q === currentPage) {\n          document.querySelector('.glyphs').appendChild(span)\n          span = document.createElement('span');\n        }\n      }, 1))(n);\n      chars = '';\n    }\n  }\n}\n\nlet currentPage = 0;\nconst canvas = document.querySelector('.canvas');\ncanvas.style.width = '100%';\ncanvas.style.height = '100%';\n\ncanvas.style.width = `${canvas.width}px`;\ncanvas.width = canvas.offsetWidth;\n// drawGlyphs(currentPage);\n\nconst links = document.querySelectorAll('.aside li');\nconst glyphs = document.querySelector('.glyphs');\n\nfunction removeSelected() {\n  [].forEach.call(links, function(link) {\n    link.classList.remove('selected');\n  });\n}\n\nfunction addSelected(link) {\n  link.classList.add('selected');\n}\n\n[].forEach.call(links, function(link, idx) {\n  link.addEventListener('click', function(event) {\n    drawGlyphs(idx);\n    removeSelected();\n    addSelected(event.target);\n  });\n});\n\ndocument.querySelector('.font-family-selector').addEventListener('change', function(event) {\n  glyphs.style.fontFamily = event.target.value;\n});\n\ndocument.querySelector('.font-size-selector').addEventListener('change', function(event) {\n  glyphs.style.fontSize = event.target.value;\n});\n\ndocument.querySelector('.color-selector').addEventListener('change', function(event) {\n  glyphs.style.color = event.target.value;\n});\n\ndocument.querySelector('.file-reader').addEventListener('change', function(event) {\n  const file = event.target.files[0];\n  if (file) {\n    let font;\n    const arrayReader = new FileReader();\n    arrayReader.onload = function(event) {\n      font = opentype.parse(event.target.result);\n\n      const t0 = performance.now();\n\n      let str = '';\n      for (let i = 0; i < 16*16*16*16; i++) {\n        str += String.fromCharCode(i);\n      }\n      const glyphsUnfiltered = font.stringToGlyphs(str);\n      const glyphs = glyphsUnfiltered.filter(glyph => glyph.unicode !== undefined);\n\n      const t1 = performance.now();\n      console.log(glyphs);\n      console.log(t1 - t0);\n\n      const spacing = 75;\n      let x = spacing;\n      let y = spacing;\n      const width = canvas.width - spacing - spacing;\n\n      let height = 300 + (spacing * (glyphs.length/(width/spacing)));\n      canvas.style.height = `${height}px`;\n      canvas.height = height;\n      const ctx = canvas.getContext('2d');\n      glyphs.forEach((glyph, index) => {\n        if (x > width) {\n          console.log('down');\n          y += spacing;\n          x = spacing;\n        }\n        x += spacing;\n        glyph.draw(ctx, x, y);\n      });\n    };\n    arrayReader.readAsArrayBuffer(file);\n\n\n\n    //     const reader = new FileReader();\n    //     reader.readAsDataURL(file);\n    //     reader.addEventListener('load', function() {\n    //       const style = document.createElement('style');\n    //       style.type = 'text/css';\n    //       style.appendChild(document.createTextNode(`\n    //         @font-face {\n//           font-family: \"${file.name}\";\n//           src: url(${reader.result}) format(\"woff\");\n//         }\n//       `));\n//       document.head.appendChild(style);\n//       glyphs.style.fontFamily = `\"${file.name}\"`;\n//     });\n  }\n});\n"]}